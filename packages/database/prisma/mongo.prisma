datasource mongodb {
  provider = "mongodb"
  url      = env("DATABASE_URL_MONGODB")
}

generator client {
  provider = "prisma-client-js"
  output = "./generated/mongo-client"
}


model Character {
  id           String                @id @default(auto()) @map("_id") @mongodb.ObjectId
  accountId    String                // References Account.id (PostgreSQL)
  discordId    String                @unique // Same as Account's discordId for direct lookup
  characterName String               @unique
  pebbles       Int                   @default(0)
  health       Int                   @default(100)
  stamina      Int                   @default(100)
  stats        Json
  inventory    Json
  questLog     Json 
  achievements Json
  journals     Json
  createdAt    DateTime              @default(now())
  updatedAt    DateTime              @updatedAt
  @@map("characters")
}

model AnalyticsEvent {
  id        String   @id @default(auto()) @map("_id") @mongodb.ObjectId
  eventType String   // e.g., "character_created", "item_collected"
  payload   Json     // JSON object with event details
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@map("analytics_events")
}